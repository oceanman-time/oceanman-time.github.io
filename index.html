<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Oh Gee, what Ocean Man is it?</title>
    <link rel="stylesheet" href="css/style.css" type="text/css">
</head>
<body>
<p class="centered">
    <span id="oceanman-count"></span> Ocean Men
</p>
<p class="centered">
    have passed since
</p>
<p class="centered">
    <span id="initial-time"></span>
</p>
<p class="centered">
    (Release of Last Golden Wind Episode)
</p>

<script type="module">
    // Initial Date in milliseconds - Date of the Last Golden Wind Episode
    const initialDate = new Date('July 28, 2019 14:00:00 UTC+2:00');

    // Variable to store the current date in milliseconds
    var currentDate;

    // Variable to count Ocean Men
    var oceanManCount;
    var oceanManCountInt;

    // Duration of one ocean man in milliseconds
    const oceanmanDuration = 128000;

    while(true){
        //Computing how many ocean man songs have passed
        currentDate = new Date();
        oceanManCount = ( currentDate - initialDate ) / oceanmanDuration;
        oceanManCountInt = Math.floor(oceanManCount);

        document.getElementById('oceanman-count').innerText = oceanManCountInt.toString();

        //Displaying initial time
        document.getElementById('initial-time').innerHTML = initialDate.toLocaleString();

        //Refreshing the page if counter increased by one
        if(oceanManCount === oceanManCountInt){
            window.location.reload();
        }
    }
</script>

</body>
</html>